var body,blankView,vistas=[],arrayConstructor=[].constructor;function fullscreen(){if(window.fullscreen){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}function getVistas(){let e=document.getElementsByTagName("body")[0];body=e;let t=e.children;blankView=(vistas=t)[1];let s=t.length;for(i=1;i<s;i++)t[i].classList.add("hidden");setTimeout((function(){changeViewAnimation("Vista-Ingreso",2)}),2e3)}function changeViewAnimation(e,t){let s=vistas.length;for(i=2;i<s;i++)if(vistas[i].getAttribute("id")==e){let e=vistas[i],s=vistas[0];if(1==t){null==localStorage.getItem("last")&&localStorage.setItem("last",JSON.stringify([]));try{JSON.parse(localStorage.getItem("last"))}catch{localStorage.setItem("last",JSON.stringify([]))}let e=JSON.parse(localStorage.getItem("last"));e.push(s.getAttribute("id")),localStorage.setItem("last",JSON.stringify(e))}else 2==t&&localStorage.setItem("last",JSON.stringify([]));vistas[1].classList.remove("hidden"),vistas[1].classList.add("appeared"),setTimeout((()=>{s.classList.add("hidden"),body.removeChild(s),body.removeChild(e),body.insertBefore(e,blankView),body.insertBefore(s,blankView.nextSibling),e.classList.remove("hidden"),blankView.classList.remove("appeared"),blankView.classList.add("desappeared"),setTimeout((()=>{blankView.classList.remove("desappeared"),blankView.classList.add("hidden")}),1e3)}),1e3)}}function verifyData(){let e=document.getElementById("email").value,t=document.getElementById("password").value,s=JSON.parse(localStorage.getItem("users"));if(null!=s)for(i=0;i<s.length;i++)if(s[i].user==e&&s[i].password==t)return localStorage.setItem("user",i),document.getElementById("email").value="",document.getElementById("password").value="",loadname(),changeViewAnimation("Vista-Carga"),void setTimeout((function(){changeViewAnimation("Vista-Menu",0)}),3e3);alert("Correo o Contraseña erroneo o vacio")}function regresar(){changeViewAnimation(JSON.parse(localStorage.getItem("last")).pop(),0);let e=JSON.parse(localStorage.getItem("last"));e.pop(),localStorage.setItem("last",JSON.stringify(e))}function verifyregister(){if(""==document.getElementById("emailreg").value.trim()||""==document.getElementById("passwordreg").value.trim()||""==document.getElementById("verifpasswordreg").value.trim())alert("Algun campo vacio");else{if(document.getElementById("passwordreg").value==document.getElementById("verifpasswordreg").value){user=document.getElementById("emailreg").value,password=document.getElementById("passwordreg").value;try{local=JSON.parse(localStorage.getItem("users"))}catch{return users=[],users.push({user:user,password:password}),localStorage.setItem("users",JSON.stringify(users)),changeViewAnimation("Vista-Datos-Personales",2),document.getElementById("emailreg").value=null,document.getElementById("passwordreg").value=null,void(document.getElementById("verifpasswordreg").value=null)}if(null==localStorage.getItem("users"))return users=[],users.push({user:user,password:password}),localStorage.setItem("users",JSON.stringify(users)),document.getElementById("emailreg").value=null,document.getElementById("passwordreg").value=null,document.getElementById("verifpasswordreg").value=null,void changeViewAnimation("Vista-Datos-Personales",2);for(users=JSON.parse(localStorage.getItem("users")),i=0;i<users.length;i++)if(users[i].user==user)return void alert("El usuario ya existe");return users.push({user:user,password:password}),localStorage.setItem("users",JSON.stringify(users)),changeViewAnimation("Vista-Datos-Personales",2),document.getElementById("emailreg").value=null,document.getElementById("passwordreg").value=null,void(document.getElementById("verifpasswordreg").value=null)}alert("Contraseña de verificacion diferente")}}function savedata(){for(users=JSON.parse(localStorage.getItem("users")),nombre=document.getElementById("nombrecompleto").value.trim(),edad=document.getElementById("edad").value.trim(),altura=document.getElementById("altura").value.trim(),radios=document.getElementsByName("factoresderiesgo"),riesgo="",i=0;i<radios.length;i++)1==radios[i].checked&&(riesgo=radios[i]);""==altura||""==edad||""==nombre||""==riesgo?alert("Algun campo vacio"):(document.getElementById("nombrecompleto").value="",document.getElementById("edad").value="",document.getElementById("altura").value="",riesgo.checked=!1,riesgo=riesgo.value,users[users.length-1].name=nombre,users[users.length-1].age=edad,users[users.length-1].height=altura,users[users.length-1].risk=riesgo,localStorage.setItem("users",JSON.stringify(users)),changeViewAnimation("Vista-Registro-Exitoso"),setTimeout((function(){changeViewAnimation("Vista-Ingreso",2)}),3e3))}function cerrarSesion(){localStorage.setItem("user",-1),localStorage.setItem("last",[]),changeViewAnimation("Vista-Ingreso",0)}function loadname(){for(username=document.getElementsByName("username"),usernamevalue=JSON.parse(localStorage.getItem("users"))[localStorage.getItem("user")],i=0;i<username.length;i++)username[i].innerHTML=usernamevalue.name}window.addEventListener("DOMContentLoaded",getVistas);